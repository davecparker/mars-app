
local scanButton
local information

scanButton = display.newRect(  10, 50, 100, 50 )
scanButton:setFillColor ( 244 )
information = display.newText(  "Press Above to Scan", 10, 120, 200, 0, native.systemFont, 20 )


local function buttonTouch ( event )
	if event.phase == "ended" then
		system.openURL( "pic2shop://scan?callback=yourapp%3A")
	end
end

scanButton:addEventListener ( "touch", buttonTouch )

local launchURL

local function onSystemEvent( event )
    if event.type == "applicationOpen" and event.url then
        launchURL = event.url
		information.text = "Raw: " .. event.url
        print( launchURL )  -- output: coronasdkapp://mycustomstring
        
		local testA = string.find ( launchURL, "=" )
		
		if tostring(testA) ~= "nil" then
			barCodeFinal = string.sub ( launchURL, testA + 1 )
			information.text = information.text .. "\n" .. "Afterwards: " .. barCodeFinal
			information.x = 10
		end
    end
end




Runtime:addEventListener( "system", onSystemEvent )